export const Head = () => (
  <>
    <meta name="theme-color" content="#111" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@8/themes/reset-min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@8/themes/algolia-min.css">
  <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>

  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; padding: 2rem; }
    .container { max-width: 900px; margin: 0 auto; }
    .ais-SearchBox { margin-bottom: 1rem; }
    .hit { display: grid; gap: .25rem; padding: .75rem 0; border-bottom: 1px solid #eee; }
    .hit-title { font-weight: 600; }
    .hit-desc { color: #555; }
    .meta { font-size: .85rem; color: #666; }
  </style>

  </>
);

export default function App({ children }) {
  return (
    <div className="bg-white text-slate-800">
      <header className="border-b border-slate-200">
        <div className="px-4 py-3 flex items-center justify-between">
          <a href="/" className="brand-link text-lg">Canopy IIIF</a>
          <nav className="flex items-center gap-4">
            <a href="/search" className="hover:underline">Search</a>
            <a href="/getting-started" className="hover:underline">Getting Started</a>
          </nav>
        </div>
      </header>

      <main className="prose prose-slate max-w-none">
        {children}
      </main>

      <footer className="border-t border-slate-200 text-slate-500">
        <div className="mx-auto max-w-content w-full px-4 py-6">(footer)</div>
      </footer>
    <script>
        // 1) Configure your Algolia credentials
        const ALGOLIA_APP_ID = 'VY0JKEX4JA';
        const ALGOLIA_SEARCH_API_KEY = 'ea919b98150b073b88406ca88cbf61dd'; // use the *search-only* key client-side
        const ALGOLIA_INDEX_NAME = 'search-index';
    
        // 2) Create the Algolia client and InstantSearch instance
        const searchClient = algoliasearch(ALGOLIA_APP_ID, ALGOLIA_SEARCH_API_KEY);
        const search = instantsearch({
          indexName: ALGOLIA_INDEX_NAME,
          searchClient
        });
    
        // 3) Add widgets
        search.addWidgets([
          instantsearch.widgets.searchBox({
            container: '#searchbox',
            placeholder: 'Search…',
            showReset: true,
            showLoadingIndicator: true
          }),
    
          instantsearch.widgets.stats({
            container: '#stats',
            templates: {
              text(data) {
                const { nbHits, processingTimeMS } = data;
                return `${nbHits.toLocaleString()} results • ${processingTimeMS} ms`;
              }
            }
          }),
    
          // Customize how each hit renders
          instantsearch.widgets.hits({
            container: '#hits',
            templates: {
              item(hit) {
                // Adjust these fields to match your index attributes
                const title = hit._highlightResult?.title?.value ?? hit.title ?? '(untitled)';
                const description = hit._snippetResult?.description?.value
                  ?? hit._highlightResult?.description?.value
                  ?? '';
                const url = hit.url || '#';
    
                return `
                  <article class="hit">
                    <a href="${url}" class="hit-title">${title}</a>
                    <div class="hit-desc">${description}</div>
                  </article>
                `;
              },
              empty(results) {
                return `No results for "<strong>${instantsearch.highlight({ attribute: 'query', hit: results })}</strong>"`;
              }
            }
          }),
    
          instantsearch.widgets.pagination({
            container: '#pagination',
            scrollTo: '.container'
          })
        ]);
    
        // 4) Start the search UI
        search.start();
      </script>
    </div>

);
}
